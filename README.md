# 2020华为软件精英挑战赛
## 1、简介
2020华为软件精英挑战赛，成渝赛区第11名小组的参考代码

## 2、文件说明
比赛分为三个阶段，分别是初赛阶段、复赛阶段、复赛最终阶段，每个阶段的题目要求都有所不同，因此分别附上了每个阶段的最终版本代码并分别放在三个不同的文件件当中。文件夹里的内容有题目要求文档、自己的参考代码、官方给出的本地测试集及答案。
《额外的数据集》文件夹里则放置了非官方的民间流传的测试集，由于答案文件过于庞大因此就没上传到该文件夹中

## 3、程序简要说明
程序主要由输入处理、dfs核心算法、输出处理三部分组成。


**输入处理部分：**
负载将数据集中的数据读取到内存中，然后对数据进行预处理，然后存放到指定的数据结构中，方便dfs算法进行环的查找。


**dfs核心算法部分：**
dfs找环的基本思想是从某一初始节点出发，遍历其子节点，当再次遍历到初始出发节点时，即视为找到一个环，例如：1-->2-->3-->4-->1，这就是一个环。


为了加快搜索速度，在搜索过程中还引入了以下的剪枝方案：

1、为了避免重复找环，**当在搜索过程中遇到比初始出发节点还小的节点时则退出对该条路径的搜索**，例如：2-->3-->4-->1，以2作为出发节点，在搜索过程中遇到了节点1，于是终止对该条路径的搜索，因为该环在以1为出发节点开始搜索时肯定已经搜索到了。

2、由于题目对环的长度有限制，为[3,7],因此**一旦当路径长度达到7还未遇到初始节点时，就终止对该路径的搜索**。

3、为了进一步加快搜索速度，**我们采用了双向搜索的方案**，在输入处理部分我们对每个节点都建立了出度表和入度表，在搜索时我们先根据入度表，对节点进行深度为3的反向搜索，并对搜索过程中遇到的节点进行标记，其目的是找出能在3步内到达出发节点的所有节点。然后再根据出度表对节点进行正向搜索，在正向搜索过程中会根据反向搜索的结果，决定是否还要在当前路径继续往下搜索。

**输出处理部分：**
主要负责路径结果的输出。

1、由于路径数据是以int的形式存放在内存中，而题目要求输出到txt文件中，因此要将int类型路径数据转换为char类型，并存储在输出缓冲区中。

2、由于内存空间有限，因此采用的是小批量处理的方式，即每次只处理一部分的路径数据，然后将其输出到txt文本中，待输出缓冲区得到释放后，再处理接下来一部分的路径数据，直至将所有路径数据都处理完毕为止。这样只用定义一个较小的输出缓冲区，就能实现将所有路径答案全部输出。